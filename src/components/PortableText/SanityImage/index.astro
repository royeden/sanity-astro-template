---
import { sanityClient } from "sanity:client";
import type { ImageWithAlt } from "../../../sanity/types";
import { Image } from "astro:assets";
import { getAstroSanityImage } from "./astroSanityImageLoader";
import type { AstroSanityImageBuilder } from "./types";

interface Props
  extends Pick<astroHTML.JSX.HTMLAttributes, "class" | "class:list"> {
  imageBuilder?: AstroSanityImageBuilder;
  node: ImageWithAlt;
}

const { imageBuilder, node } = Astro.props;

const image = getAstroSanityImage(sanityClient, node, { imageBuilder });
---

{
  image && (
    <Image
      height={image.height}
      width={image.width}
      src={image.src}
      alt={node.alternativeText || ""}
      title={node.alternativeText}
    />
  )
}
